<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>6. Dezember â€“ Nikolaus im Labyrinth</title>
<style>
body {
  font-family: system-ui, sans-serif;
  background: #e0f7fa;
  text-align: center;
  margin: 0;
  padding: 0;
}
h1 { margin: 16px 0 8px; }
#maze-container {
  display: inline-block;
  border: 6px solid #2e7d32;
  background: #a5d6a7;
  border-radius: 10px;
  padding: 8px;
  touch-action: none;
}
table {
  border-collapse: collapse;
}
td {
  width: 28px; height: 28px;
  border: 1px solid #ccc;
  text-align: center;
  vertical-align: middle;
  font-size: 22px;
}
.wall {
  background: #2e7d32; /* dunkler Wald */
}
.path {
  background: #fafafa;
}
.goal {
  background: #ffeb3b;
}
.player {
  background: #fafafa;
  font-size: 22px;
}
.letter-container {
  margin-top: 20px;
  display: none;
}
#dpad {
  margin: 16px auto;
  width: 120px;
  display: grid;
  grid-template-areas:
    ". up ."
    "left center right"
    ". down .";
  gap: 6px;
}
#dpad button {
  padding: 10px;
  font-size: 18px;
  border-radius: 6px;
  border: 1px solid #aaa;
  background: #fff;
}
#dpad button:active {
  background: #ddd;
}
#up { grid-area: up; }
#down { grid-area: down; }
#left { grid-area: left; }
#right { grid-area: right; }
#center { grid-area: center; }
footer {
  margin: 20px;
}
</style>
</head>
<body>
<h1>6. Dezember â€“ Nikolaus im Labyrinth ðŸŽ…</h1>
<p>FÃ¼hre den Nikolaus durch den Wald zum gelben Haus in der Mitte!</p>
<div id="maze-container"></div>

<div id="dpad">
  <button id="up">â–²</button>
  <button id="left">â—€</button>
  <button id="center">ðŸŽ…</button>
  <button id="right">â–¶</button>
  <button id="down">â–¼</button>
</div>

<div id="letter-container" class="letter-container">
  <p>Geschafft! Dein Buchstabe:</p>
  <div class="letter" id="letter" style="font-size:32px;font-weight:bold;"></div>
  <p>Merke dir diesen Buchstaben!</p>
</div>

<footer>
  <a href="index.html">ZurÃ¼ck zum Kalender</a>
</footer>

<script>
// 0 = Weg, 1 = Wand
const maze = [
 [0,1,1,1,1,1,1,1,1,1,0],
 [0,0,0,0,0,0,1,0,0,1,0],
 [1,0,1,1,1,0,1,0,1,1,0],
 [1,0,1,0,0,0,1,0,0,0,0],
 [1,0,1,0,1,1,1,1,1,0,1],
 [1,0,0,0,1,0,0,0,1,0,0],
 [1,1,1,0,1,0,1,0,1,1,0],
 [1,0,0,0,1,0,1,0,0,0,0],
 [1,0,1,1,1,0,1,1,1,1,0],
 [1,0,0,0,0,0,0,0,0,0,0],
 [1,1,1,1,1,1,1,1,1,1,0]
];
let position = { r: 0, c: 0 };
const goal = { r: 5, c: 5 };
const container = document.getElementById('maze-container');

function drawMaze() {
  container.innerHTML = '';
  const table = document.createElement('table');
  for (let r = 0; r < maze.length; r++) {
    const tr = document.createElement('tr');
    for (let c = 0; c < maze[r].length; c++) {
      const td = document.createElement('td');
      if (maze[r][c] === 1) td.className = 'wall';
      else td.className = 'path';
      if (r === goal.r && c === goal.c) td.classList.add('goal');
      if (r === position.r && c === position.c) td.innerText = 'ðŸŽ…';
      tr.appendChild(td);
    }
    table.appendChild(tr);
  }
  container.appendChild(table);
}

function move(dr, dc) {
  const nr = position.r + dr;
  const nc = position.c + dc;
  if (nr < 0 || nc < 0 || nr >= maze.length || nc >= maze[0].length) return;
  if (maze[nr][nc] === 1) return; // Wand
  position = { r: nr, c: nc };
  drawMaze();
  if (position.r === goal.r && position.c === goal.c) {
    showLetter('N');
  }
}

function keyHandler(e) {
  switch (e.key) {
    case 'ArrowUp':
    case 'w': move(-1, 0); break;
    case 'ArrowDown':
    case 's': move(1, 0); break;
    case 'ArrowLeft':
    case 'a': move(0, -1); break;
    case 'ArrowRight':
    case 'd': move(0, 1); break;
  }
}

document.getElementById('up').onclick = () => move(-1,0);
document.getElementById('down').onclick = () => move(1,0);
document.getElementById('left').onclick = () => move(0,-1);
document.getElementById('right').onclick = () => move(0,1);

// einfache Touchsteuerung
let startX=0,startY=0;
container.addEventListener('touchstart',e=>{
  startX=e.touches[0].clientX;
  startY=e.touches[0].clientY;
});
container.addEventListener('touchend',e=>{
  const dx=e.changedTouches[0].clientX-startX;
  const dy=e.changedTouches[0].clientY-startY;
  if(Math.abs(dx)>Math.abs(dy)){
    if(dx>30)move(0,1); else if(dx<-30)move(0,-1);
  }else{
    if(dy>30)move(1,0); else if(dy<-30)move(-1,0);
  }
});

function showLetter(letter) {
  document.getElementById('letter-container').style.display = 'block';
  document.getElementById('letter').textContent = letter;
  document.removeEventListener('keydown', keyHandler);
}

drawMaze();
document.addEventListener('keydown', keyHandler);
</script>
</body>
</html>
