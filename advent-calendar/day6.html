<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>6. Dezember â€“ Nikolaus im harten Labyrinth</title>
<style>
:root{
  --cell: 22px;
  --gap: 2px;
  --cols: 29;
  --wall:#0f172a;
  --path:#ffffff;
  --path-dim:#cbd5e1;
  --forest:#166534;
  --house:#ffd54f;
  --grid-outline:#00000033;
  --player-scale: 1.2;
  --goal-scale: 1.05;
  --bg-scale: 1.4; /* zoom factor */
}
body{
  margin:0;
  font-family:system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
  background:#e8f3ea;
  background-size:calc(100% * var(--bg-scale)) auto;
  background-position:center;
  background-attachment:fixed;
}
header,footer{text-align:center;padding:10px}
h1{margin:0;font-size:1.1rem}
.sub{font-size:.9rem;opacity:.8}
.intro{margin:8px auto;max-width:800px;padding:8px 10px;background:#fff;border-radius:10px;border:1px solid #ccc}
.wrap{display:grid;place-items:center;gap:8px;padding:8px}
.frame{padding:6px;border-radius:14px;background:rgba(255,255,255,.65);
  box-shadow:0 10px 28px rgba(0,0,0,.18), inset 0 0 0 2px var(--grid-outline);
  overflow:auto;max-height:calc(100vh - 250px);
}
.maze{
  display:grid;
  grid-template-columns:repeat(var(--cols),var(--cell));
  grid-auto-rows:var(--cell);
  gap:var(--gap);
  background:#fafafaAA;
  border-radius:10px;
}
.cell{width:var(--cell);height:var(--cell);border-radius:4px;display:grid;place-items:center}
.wall{background:var(--wall)}
.path{background:var(--path)}
.path.dim{background:var(--path-dim)}
.goal{background:var(--house)}
.sprite{position:absolute;width:calc(var(--cell)*var(--player-scale));height:calc(var(--cell)*var(--player-scale));
  font-size:calc(var(--cell)*1);display:grid;place-items:center;pointer-events:none;
}
.controls{
  display:grid;
  grid-template-areas:
    ". up ."
    "left center right"
    ". down .";
  gap:8px;
}
.btn{width:52px;height:52px;border-radius:12px;border:1px solid #aaa;background:#fff;font-size:20px;}
.up{grid-area:up}.down{grid-area:down}.left{grid-area:left}.right{grid-area:right}
</style>
</head>
<body>
<header>
  <h1>6. Dezember â€“ Nikolaus im harten Labyrinth</h1>
  <div class="sub">Langer Umweg ums Haus, viele Sackgassen.</div>
  <p class="intro">â€žVon drauÃŸen vom Walde, da komme ich her, aber ich habe leider den Weg zur EichbÃ¼hlstraÃŸe vergessen. Kannst du mir zeigen, wie ich zu deinem Haus komme?â€œ</p>
</header>

<main class="wrap">
  <div class="frame"><div id="maze" class="maze"></div></div>

  <p>Falls es zu schwer ist, hier ist eine Taschenlampe:</p>
  <button id="fogToggle">Sichtfeld AN</button>

  <div class="controls">
    <button class="btn up">â–²</button>
    <button class="btn left">â—€</button>
    <button class="btn" disabled>ðŸŽ…</button>
    <button class="btn right">â–¶</button>
    <button class="btn down">â–¼</button>
  </div>

  <div id="win" style="display:none;font-weight:bold">Geschafft! Merke dir den Buchstaben: <strong>N</strong></div>
</main>

<footer><p><a href="index.html">ZurÃ¼ck zum Kalender</a></p></footer>

<script>
/* === Background setup === */
const bgURL = "assets/nikolaus_map.png";
if (bgURL){
  document.body.style.backgroundImage = `url('${encodeURI(bgURL)}')`;
  document.documentElement.style.setProperty("--bg-scale","1.4");
}

/* === Maze data === */
const LEVEL = [
[1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
[1,0,0,0,0,0,1,1,0,1,1,1,0,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1],
[1,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,1],
[1,0,1,0,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,0,1,1],
[1,0,1,0,1,1,1,0,1,0,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,0,1,1],
[1,0,1,0,1,0,0,0,1,0,1,1,1,1,1,1,1,0,1,1,0,1,1,1,1,1,0,1,1],
[1,0,1,0,1,1,1,1,1,0,1,1,0,0,0,0,0,0,1,1,0,1,1,1,1,1,0,1,1],
[1,0,1,0,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,0,1,1],
[1,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,0,1,1],
[1,0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,0,1,1],
[1,1,0,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0,1,1,0,1,0,1,1],
[1,1,0,0,1,1,1,1,1,0,1,1,0,0,0,0,1,1,1,1,1,0,1,1,0,0,0,1,1],
[1,1,1,0,0,0,0,0,1,0,1,1,0,0,0,0,0,0,0,1,1,0,1,1,1,1,1,1,1],
[1,1,1,0,1,0,1,1,1,1,1,1,0,0,0,1,1,1,0,1,1,0,0,0,0,0,0,1,1],
[1,1,1,0,1,0,0,0,0,0,0,1,0,1,1,1,1,1,0,1,1,1,1,0,1,1,0,1,1],
[1,1,1,0,1,0,1,1,0,1,1,1,0,1,1,0,0,0,0,1,1,1,1,0,1,1,0,1,1],
[1,1,1,0,1,0,1,0,0,0,0,0,0,1,1,0,1,1,1,1,1,1,1,0,1,1,0,1,1],
[1,1,1,1,1,0,0,1,0,1,1,1,1,0,0,0,0,0,0,1,0,0,0,0,1,1,0,1,1],
[1,1,1,1,1,1,0,1,1,1,0,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,0,1,1],
[1,1,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,1,1],
[1,1,0,1,1,1,1,0,0,0,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,1,1,1],
[1,1,0,1,1,1,1,0,1,1,1,1,0,1,0,1,1,0,0,0,1,1,0,1,1,1,1,1,1],
[1,1,0,0,0,0,0,0,0,0,0,1,0,1,0,1,0,1,1,0,1,0,0,0,0,1,1,1,1],
[1,1,0,1,1,1,0,1,1,1,1,1,0,1,0,0,0,1,1,0,1,1,1,1,0,1,1,1,1],
[1,1,0,0,1,1,0,1,1,1,1,1,0,1,1,1,1,0,0,0,1,1,1,1,0,0,0,1,1],
[1,1,1,0,0,0,0,0,0,0,1,1,0,1,1,0,1,0,1,0,0,0,1,1,0,1,1,1,1],
[1,1,1,1,1,1,0,1,1,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,1,1,1,1],
[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
];

const mazeEl=document.getElementById("maze");
const rows=LEVEL.length, cols=LEVEL[0].length;
document.documentElement.style.setProperty("--cols",cols);

let player={x:1,y:1};
const goal={x:13,y:0};
let lampOn=false;

/* draw maze */
function draw(){
  mazeEl.innerHTML="";
  for(let y=0;y<rows;y++){
    for(let x=0;x<cols;x++){
      const div=document.createElement("div");
      div.classList.add("cell");
      if(LEVEL[y][x]===1) div.classList.add("wall");
      else div.classList.add("path");
      if(lampOn && Math.abs(player.x-x)>2 || lampOn && Math.abs(player.y-y)>2){
        div.classList.add("path","dim");
      }
      if(x===goal.x && y===goal.y) div.classList.add("goal");
      mazeEl.appendChild(div);
    }
  }
  const sprite=document.createElement("div");
  sprite.className="sprite";
  sprite.textContent="ðŸŽ…";
  const idx=player.y*cols+player.x;
  mazeEl.children[idx].appendChild(sprite);
}

/* movement */
function move(dx,dy){
  const nx=player.x+dx, ny=player.y+dy;
  if(nx<0||ny<0||nx>=cols||ny>=rows) return;
  if(LEVEL[ny][nx]===1) return;
  player.x=nx;player.y=ny;
  draw();
  if(player.x===goal.x&&player.y===goal.y){
    document.getElementById("win").style.display="block";
  }
}

/* controls */
document.querySelector(".up").onclick=()=>move(0,-1);
document.querySelector(".down").onclick=()=>move(0,1);
document.querySelector(".left").onclick=()=>move(-1,0);
document.querySelector(".right").onclick=()=>move(1,0);
document.getElementById("fogToggle").onclick=()=>{
  lampOn=!lampOn;
  document.getElementById("fogToggle").textContent=lampOn?"Sichtfeld AUS":"Sichtfeld AN";
  draw();
};
document.addEventListener("keydown",e=>{
  if(e.key==="ArrowUp")move(0,-1);
  if(e.key==="ArrowDown")move(0,1);
  if(e.key==="ArrowLeft")move(-1,0);
  if(e.key==="ArrowRight")move(1,0);
});

draw();
</script>
</body>
</html>









