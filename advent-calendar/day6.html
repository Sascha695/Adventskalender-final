<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Tag 6 â€“ Wortsuppe (nur vorwÃ¤rts & von oben nach unten)</title>
  <style>
    :root{
      --accent:#c54c3d;
      --found:#1d9e57;
    }
    html,body{height:100%}
    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      background:#f7efe6;
      color:#222;
    }
    header{ text-align:center; background:#c54c3d; color:#fff; padding:1rem .75rem; }
    header h1{ margin:0; font-size:2rem; }

    main{ max-width:1000px; margin:1rem auto 2rem; padding:1rem; }
    .wrap{ display:grid; grid-template-columns: 1fr min(92vw,520px); gap:1rem; align-items:start; }
    @media (max-width:900px){ .wrap{ grid-template-columns:1fr; } }

    .card{
      background:rgba(255,255,255,.8);
      border:1px solid rgba(0,0,0,.08);
      border-radius:16px;
      box-shadow:0 8px 20px rgba(0,0,0,.12);
      padding:1rem;
    }

    .words h2{ margin:.2rem 0 .6rem; }
    .words ul{ list-style:none; padding:0; margin:0; columns:2; column-gap:1rem; }
    @media (max-width:480px){ .words ul{ columns:1; } }
    .words li{ padding:.25rem .4rem; border-radius:8px; break-inside:avoid-column; }
    .words li.found{ color:var(--found); text-decoration:line-through; font-weight:700; }

    /* GRID */
    .grid{
      user-select:none; touch-action:none;
      display:grid; grid-template-columns:repeat(var(--size),1fr); grid-template-rows:repeat(var(--size),1fr);
      width:min(92vw,520px); aspect-ratio:1/1; background:#000; border-radius:12px; overflow:hidden;
    }
    .cell{
      display:flex; align-items:center; justify-content:center;
      font:700 1.05rem/1 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      background:#fff8ee; position:relative;
      box-shadow: inset 0 1px 0 rgba(0,0,0,.25), inset 1px 0 0 rgba(0,0,0,.25);
    }
    .cell.preview{ background:#ffe3d7; }
    .cell.locked{ background:#e8fbf0; }

    .bar{ text-align:center; margin-top:.8rem; }
    .btn{ appearance:none; border:none; cursor:pointer; background:var(--accent); color:#fff; padding:.6rem 1rem; border-radius:10px; font-weight:700; box-shadow:0 4px 14px rgba(0,0,0,.2); }
    .msg{ display:block; margin-top:.5rem; color:#333; font-weight:600; }
    .hint{ font-size:.95rem; color:#555; margin:.25rem 0 .75rem; }
  </style>
</head>
<body>
  <header>
    <h1>Wortsuppe â€“ Weihnachten</h1>
  </header>

  <main>
    <div class="wrap">
      <!-- Wortliste -->
      <section class="card words">
        <h2>Finde diese WÃ¶rter</h2>
        <div class="hint">Nur <strong>von links nach rechts</strong> und <strong>von oben nach unten</strong>.</div>
        <ul id="wordList"></ul>
        <div class="bar">
          <button class="btn" id="resetBtn">Neu mischen</button>
          <span class="msg" id="statusMsg"></span>
        </div>
      </section>

      <!-- Gitter -->
      <section class="card">
        <div id="grid" class="grid" aria-label="Wortsuppe"></div>
      </section>
    </div>
  </main>

  <script>
    /************ Einstellungen ************/
    const SIZE = 15;                 // GittergrÃ¶ÃŸe (15x15)
    const WORDS = [                  // Wortliste (GroÃŸbuchstaben, ohne Leerzeichen)
      "GESCHENK","DREIKOENIGE","NORDPOL","RAUCHFANG","KRIPPE","ADVENTSKRANZ",
      "LEBKUCHEN","GLOCKEN","SCHLITTEN","ORNAMENT","SCHNEEMANN","WUNSCHLISTE",
      "SCHLEIFE","TRUTHAN","KEKSE","SCHNEE","ELF","STERN","STECHPALME","RENTIER",
      "KERZE","TANNENBAUM","NIKOLAUS","KRANZ","PLAETZCHEN","MISTEL","KAMIN",
      "KUGELN","WEIHNACHT","ENGEL"
    ];
    const FILL = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";

    const gridEl = document.getElementById('grid');
    const wordListEl = document.getElementById('wordList');
    const statusMsg = document.getElementById('statusMsg');
    const resetBtn = document.getElementById('resetBtn');

    /************ Grid & Platzierung (nur â†’ und â†“) ************/
    function emptyGrid(){ return Array.from({length:SIZE},()=>Array(SIZE).fill(null)); }
    function inBounds(x,y){ return x>=0 && x<SIZE && y>=0 && y<SIZE; }

    // nur zwei Richtungen: rechts und unten
    const DIRS = [
      [1,0], // waagrecht links â†’ rechts
      [0,1], // senkrecht oben â†’ unten
    ];

    function tryPlace(grid, word){
      for(let t=0; t<200; t++){
        const [dx,dy] = DIRS[Math.floor(Math.random()*DIRS.length)];
        const len = word.length;
        const maxX = dx ? SIZE - len : SIZE;
        const maxY = dy ? SIZE - len : SIZE;
        const x0 = Math.floor(Math.random()*maxX);
        const y0 = Math.floor(Math.random()*maxY);

        // passt?
        let ok = true;
        for(let i=0;i<len;i++){
          const x = x0 + dx*i, y = y0 + dy*i;
          const c = grid[y][x];
          if(c && c !== word[i]){ ok=false; break; }
        }
        if(!ok) continue;

        // eintragen
        for(let i=0;i<len;i++){
          const x = x0 + dx*i, y = y0 + dy*i;
          grid[y][x] = word[i];
        }
        return {start:[x0,y0], end:[x0+dx*(len-1), y0+dy*(len-1)]};
      }
      return null;
    }

    function buildGrid(words){
      const grid = emptyGrid();
      const placed = [];
      for(const w of words){
        const word = w.replace(/\s+/g,'').toUpperCase();
        const p = tryPlace(grid, word);
        if(p) placed.push({word, coords:p});
      }
      // Rest auffÃ¼llen
      for(let y=0;y<SIZE;y++){
        for(let x=0;x<SIZE;x++){
          if(!grid[y][x]) grid[y][x] = FILL[Math.floor(Math.random()*FILL.length)];
        }
      }
      return {grid, placed};
    }

    /************ Rendering ************/
    let data, foundWords, cellEls;
    function render(){
      gridEl.style.setProperty('--size', SIZE);
      gridEl.innerHTML = '';
      cellEls = [];

      for(let y=0;y<SIZE;y++){
        for(let x=0;x<SIZE;x++){
          const d = document.createElement('div');
          d.className = 'cell';
          d.dataset.x = x; d.dataset.y = y;
          d.textContent = data.grid[y][x];
          gridEl.appendChild(d);
          cellEls.push(d);
        }
      }
      wordListEl.innerHTML = '';
      for(const w of WORDS){
        const li = document.createElement('li');
        li.textContent = w;
        li.id = 'w_'+w;
        wordListEl.appendChild(li);
      }
    }

    /************ Auswahl: nur horizontal vorwÃ¤rts oder vertikal vorwÃ¤rts ************/
    let selecting=false, startCell=null, previewCells=[];

    function getCell(ev){
      const t = ev.target.closest('.cell'); if(!t) return null;
      return { x:+t.dataset.x, y:+t.dataset.y, el:t };
    }
    function clearPreview(){ previewCells.forEach(el=>el.classList.remove('preview')); previewCells=[]; }

    function lineCellsLimited(x0,y0,x1,y1){
      const dx = Math.sign(x1-x0);
      const dy = Math.sign(y1-y0);

      // nur exakt horizontal vorwÃ¤rts (dx=+1, dy=0) oder vertikal vorwÃ¤rts (dx=0, dy=+1)
      if( (dx===1 && dy===0) || (dx===0 && dy===1) ){
        const cells=[];
        let x=x0, y=y0;
        while(true){
          cells.push({x,y});
          if(x===x1 && y===y1) break;
          x += dx; y += dy;
        }
        return cells;
      }
      return []; // alles andere ignorieren
    }

    function lettersOf(cells){ return cells.map(({x,y})=>data.grid[y][x]).join(''); }

    function lockCells(cells){
      for(const {x,y} of cells){
        gridEl.children[y*SIZE+x].classList.add('locked');
      }
    }
    function markFound(w){
      foundWords.add(w);
      const li = document.getElementById('w_'+w);
      if(li) li.classList.add('found');
      statusMsg.textContent = `${foundWords.size}/${WORDS.length} gefunden`;
    }

    function onDown(e){
      const c = getCell(e); if(!c) return;
      selecting=true; startCell=c;
      clearPreview(); c.el.classList.add('preview'); previewCells=[c.el];
      e.preventDefault();
    }
    function onMove(e){
      if(!selecting || !startCell) return;
      const c = getCell(e); if(!c) return;
      clearPreview();
      const cells = lineCellsLimited(startCell.x,startCell.y,c.x,c.y);
      for(const {x,y} of cells){
        const el = gridEl.children[y*SIZE+x];
        el.classList.add('preview');
        previewCells.push(el);
      }
    }
    function onUp(e){
      if(!selecting || !startCell){ selecting=false; return; }
      const c = getCell(e) || startCell;
      const cells = lineCellsLimited(startCell.x,startCell.y,c.x,c.y);
      const sel = lettersOf(cells);

      let matched=null;
      for(const w of WORDS){
        if(foundWords.has(w)) continue;
        if(sel===w){ matched=w; break; } // nur vorwÃ¤rts exakt
      }
      if(matched){ lockCells(cells); markFound(matched); }

      clearPreview(); selecting=false; startCell=null;
      if(foundWords.size===WORDS.length) statusMsg.textContent='ðŸŽ‰ Alle WÃ¶rter gefunden!';
    }

    function addEvents(){
      // Maus
      gridEl.addEventListener('mousedown', onDown);
      window.addEventListener('mousemove', onMove);
      window.addEventListener('mouseup', onUp);
      // Touch
      gridEl.addEventListener('touchstart', (e)=>onDown(e.changedTouches[0]), {passive:false});
      gridEl.addEventListener('touchmove',  (e)=>onMove(e.changedTouches[0]),  {passive:false});
      gridEl.addEventListener('touchend',   (e)=>onUp(e.changedTouches[0]),   {passive:false});
    }

    /************ Init ************/
    function init(){
      data = buildGrid(WORDS);
      foundWords = new Set();
      render();
      statusMsg.textContent = `0/${WORDS.length} gefunden`;
    }
    resetBtn.addEventListener('click', init);

    addEvents();
    init();
  </script>
</body>
</html>

